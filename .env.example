# Ethereal Flame Studio - Environment Variables
#
# Copy this file to .env and configure your values.
# Do NOT commit your .env file to version control!
#
# v2.0 Cloud Production variables are organized into sections below.
# For local development, you typically need NO variables set -- defaults work.

# =============================================================================
# 1. Deployment Mode
# =============================================================================
# Set to "production" to activate cloud backends (R2 storage + Turso job store).
# Omit or set to anything else for local development (filesystem + SQLite).
# Individual backend overrides (STORAGE_BACKEND, JOB_STORE_BACKEND) take precedence.
# DEPLOY_ENV=production

# =============================================================================
# 2. Storage (Cloudflare R2)
# =============================================================================

# Override storage backend: "local" or "r2".
# If not set, defaults based on DEPLOY_ENV (production -> r2, otherwise -> local).
# STORAGE_BACKEND=local

# Cloudflare account ID (required for R2)
# Find at: https://dash.cloudflare.com -> Account Home -> right sidebar
# R2_ACCOUNT_ID=your_account_id_here

# R2 API token credentials (required for R2)
# Create at: https://dash.cloudflare.com -> R2 -> Manage R2 API Tokens
# R2_ACCESS_KEY_ID=your_access_key_here
# R2_SECRET_ACCESS_KEY=your_secret_key_here

# R2 bucket name (default: ethereal-flame-studio)
# R2_BUCKET_NAME=ethereal-flame-studio

# Local storage directory for filesystem backend (default: ./storage)
# STORAGE_LOCAL_PATH=./storage

# Base URL for local asset URLs (default: http://localhost:3000)
# Used by LocalStorageAdapter to construct download URLs.
# NEXT_PUBLIC_BASE_URL=http://localhost:3000

# =============================================================================
# 3. Job Store (Turso)
# =============================================================================

# Override job store backend: "local" or "turso".
# If not set, defaults based on DEPLOY_ENV (production -> turso, otherwise -> local).
# JOB_STORE_BACKEND=local

# Turso database URL (required for Turso backend)
# Get from: turso db show <db-name> --url
# TURSO_DATABASE_URL=libsql://your-db-name.turso.io

# Turso auth token (required for Turso backend)
# Get from: turso db tokens create <db-name>
# TURSO_AUTH_TOKEN=your_auth_token_here

# Local SQLite database path for filesystem backend (default: ./audio-prep-jobs.db)
# JOB_STORE_DB_PATH=./audio-prep-jobs.db

# =============================================================================
# 4. Modal (GPU Rendering)
# =============================================================================

# Modal submit endpoint URL (required for render dispatch)
# Deploy your Modal app, then find the URL in the Modal dashboard.
# MODAL_ENDPOINT_URL=https://your-modal-app--render.modal.run

# Modal status endpoint URL (optional, derived from submit URL if not set)
# MODAL_STATUS_URL=https://your-modal-app--render-status.modal.run

# Modal auth token for endpoint authentication
# Generate at: https://modal.com/settings
# MODAL_AUTH_TOKEN=your_modal_token_here

# =============================================================================
# 5. Worker (Render.com)
# =============================================================================

# Poll interval for checking new jobs (default: 3000ms = 3 seconds)
# WORKER_POLL_INTERVAL_MS=3000

# Reaper interval for cleaning up stale jobs (default: 30000ms = 30 seconds)
# WORKER_REAPER_INTERVAL_MS=30000

# Per-type job timeouts (in milliseconds):
# WORKER_INGEST_TIMEOUT_MS=600000        # 10 minutes (default)
# WORKER_PREVIEW_TIMEOUT_MS=300000       # 5 minutes (default)
# WORKER_SAVE_TIMEOUT_MS=900000          # 15 minutes (default)
# WORKER_DEFAULT_TIMEOUT_MS=600000       # 10 minutes (default)

# =============================================================================
# 6. Webhooks & URLs
# =============================================================================

# Shared secret for worker/Modal webhook authentication.
# Used by POST /api/webhooks/worker to verify incoming callbacks.
# Generate with: openssl rand -hex 32
# INTERNAL_WEBHOOK_SECRET=your_webhook_secret_here

# Public app URL for webhook callbacks and asset URLs.
# Set this to your Vercel deployment URL in production.
# NEXT_PUBLIC_APP_URL=https://ethereal-flame-studio.vercel.app

# Vercel sets this automatically on deployments.
# Used as fallback when NEXT_PUBLIC_APP_URL is not set.
# VERCEL_URL is auto-set by Vercel -- do not configure manually.

# =============================================================================
# 7. Legacy / v1.0 Features
# =============================================================================
# These variables are NOT required for v2.0 cloud production.
# They support v1.0 features (local rendering, n8n automation, Jarvis, etc.).
# Configure only if you use these features.

# --- Redis (v1.0 batch rendering) ---
# REDIS_PASSWORD=change_this_password

# --- Local Rendering ---
# RENDER_OUTPUT_DIR=./output
# WHISPER_MODEL=large-v3

# --- Google Drive sync (via rclone) ---
# GDRIVE_REMOTE=gdrive
# GDRIVE_OUTPUT_FOLDER=EtherealFlame/Renders

# --- ntfy push notifications ---
# NTFY_TOPIC=ethereal-flame
# NTFY_SERVER=https://ntfy.sh

# --- Google Sheets metadata export ---
# Follow docs/google-drive-setup.md for OAuth setup
# GOOGLE_SHEETS_ID=your_spreadsheet_id_here

# --- Cloudflare Tunnel (remote access) ---
# Get token from: Cloudflare Dashboard -> Zero Trust -> Networks -> Tunnels
# CLOUDFLARE_TUNNEL_TOKEN=your_tunnel_token_here

# --- n8n Configuration ---
# N8N_HOST=localhost
# N8N_PROTOCOL=http
# N8N_WEBHOOK_URL=http://localhost:5678/
# N8N_BASIC_AUTH_ACTIVE=true
# N8N_USER=admin
# N8N_PASSWORD=changeme
# N8N_WEBHOOK_RENDER_URL=http://n8n:5678/webhook/render-complete
# N8N_WEBHOOK_SECRET=your_shared_secret_here

# --- YouTube Upload Defaults ---
# YOUTUBE_DEFAULT_CATEGORY=10
# YOUTUBE_DEFAULT_PRIVACY=private
# YOUTUBE_DEFAULT_TAGS=meditation,visualization,audio reactive

# --- Blotato API (multi-platform posting) ---
# BLOTATO_API_KEY=your_blotato_api_key

# --- Jarvis: API Keys ---
# Anthropic: https://console.anthropic.com/
# ANTHROPIC_API_KEY=
# Deepgram: https://console.deepgram.com/
# DEEPGRAM_API_KEY=
# AWS Polly TTS:
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=us-east-1

# --- Jarvis: Notion Integration ---
# Create at: https://www.notion.so/my-integrations
# NOTION_TOKEN=
# NOTION_TASKS_DATA_SOURCE_ID=
# NOTION_TASKS_DATABASE_ID=
# NOTION_BILLS_DATA_SOURCE_ID=
# NOTION_SUBSCRIPTIONS_DATABASE_ID=
# NOTION_PROJECTS_DATA_SOURCE_ID=
# NOTION_GOALS_DATA_SOURCE_ID=
# NOTION_HABITS_DATA_SOURCE_ID=
# NOTION_RECIPES_DATA_SOURCE_ID=
# NOTION_MEAL_PLAN_DATA_SOURCE_ID=
# NOTION_MEAL_PLAN_DATABASE_ID=
# NOTION_SUBSCRIPTIONS_DATA_SOURCE_ID=
# NOTION_INGREDIENTS_DATA_SOURCE_ID=
# NOTION_SHOPPING_LIST_DATABASE_ID=

# --- Jarvis: Telegram Bot ---
# JARVIS_ENABLE_TELEGRAM=false
# TELEGRAM_BOT_TOKEN=
# TELEGRAM_WEBHOOK_SECRET=
# TELEGRAM_OWNER_ID=

# --- Jarvis: Database (Memory System) ---
# DATABASE_URL=
# DATABASE_AUTH_TOKEN=

# --- General ---
# TZ=America/Los_Angeles
# DATA_DIR=./data
